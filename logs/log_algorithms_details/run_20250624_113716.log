2025-06-24 11:37:17 INFO --- GNBG Problem Parameters for f16 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0 0 0 0 0 0 0 0 0 0]
----------------------------------------
2025-06-24 11:37:17 INFO --- GNBG Problem Parameters for f16 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0 0 0 0 0 0 0 0 0 0]
----------------------------------------
2025-06-24 11:37:17 INFO --- GNBG Problem Parameters for f16 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0 0 0 0 0 0 0 0 0 0]
----------------------------------------
2025-06-24 11:37:17 INFO --- GNBG Problem Parameters for f16 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0 0 0 0 0 0 0 0 0 0]
----------------------------------------
2025-06-24 11:38:03 INFO Run function 16 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:38:03 INFO FeHistory: [123933.64482159 151346.50077069 135893.79926799 ...  -4317.9
  -4317.9         -4317.9       ]
2025-06-24 11:38:03 INFO Expected Optimum FE: -5000
2025-06-24 11:38:03 INFO --- GNBG Problem Parameters for f18 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.22159228 0.42314776 0.4901829  0.25862884 0.37043014 0.37440768
 0.26098797 0.491006   0.27569772 0.45404864]
----------------------------------------
2025-06-24 11:38:04 INFO Run function 16 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:38:04 INFO FeHistory: [ 96228.51663035 126808.27903688 101791.15580713 ... 119374.6297602
 121613.90933444 146925.09729383]
2025-06-24 11:38:04 INFO Expected Optimum FE: -5000
2025-06-24 11:38:04 INFO --- GNBG Problem Parameters for f18 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.22159228 0.42314776 0.4901829  0.25862884 0.37043014 0.37440768
 0.26098797 0.491006   0.27569772 0.45404864]
----------------------------------------
2025-06-24 11:38:05 INFO Run function 16 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:38:05 INFO FeHistory: [128848.12697038 126320.30364974 122951.06565001 ...  -4317.9
  -4317.9         -4317.9       ]
2025-06-24 11:38:05 INFO Expected Optimum FE: -5000
2025-06-24 11:38:05 INFO --- GNBG Problem Parameters for f18 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.22159228 0.42314776 0.4901829  0.25862884 0.37043014 0.37440768
 0.26098797 0.491006   0.27569772 0.45404864]
----------------------------------------
2025-06-24 11:38:48 INFO Run function 18 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:38:48 INFO FeHistory: [151533.00433022 227609.53749589 140225.88256406 ...  -4419.10083602
  -4419.10083602  -4419.10083602]
2025-06-24 11:38:48 INFO Expected Optimum FE: -5000
2025-06-24 11:38:48 INFO --- GNBG Problem Parameters for f19 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5]
----------------------------------------
2025-06-24 11:38:51 INFO Run function 18 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:38:51 INFO FeHistory: [194250.29863895 141663.34264777 132414.22149475 ...  13535.39114765
  25490.87091075  28391.39358484]
2025-06-24 11:38:51 INFO Expected Optimum FE: -5000
2025-06-24 11:38:51 INFO --- GNBG Problem Parameters for f19 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5]
----------------------------------------
2025-06-24 11:38:52 INFO Run function 18 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:38:52 INFO FeHistory: [196938.76948685 110560.01983047 166710.16761518 ...  -4317.89999955
  -4317.89999952  -4317.89999949]
2025-06-24 11:38:52 INFO Expected Optimum FE: -5000
2025-06-24 11:38:52 INFO --- GNBG Problem Parameters for f19 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5]
----------------------------------------
2025-06-24 11:39:33 INFO Run function 19 complete. FEHistory len: 150000, AOCC: 0.0883
2025-06-24 11:39:33 INFO FeHistory: [126324.49914329 216404.75890917 211888.96320879 ...  -4991.66252832
  -4991.66252832  -4991.66252832]
2025-06-24 11:39:33 INFO Expected Optimum FE: -5000
2025-06-24 11:39:33 INFO Unimodal AOCC mean: nan
2025-06-24 11:39:33 INFO Multimodal (single component) AOCC mean: nan
2025-06-24 11:39:33 INFO Multimodal (multiple components) AOCC mean: 0.0294
2025-06-24 11:39:33 INFO AOCC mean: 0.0294
2025-06-24 11:39:33 INFO Weighed AOCC mean: nan
2025-06-24 11:39:37 INFO Run function 19 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:39:37 INFO FeHistory: [133353.8712873  208395.78977626 117764.14245698 ...  16158.28961746
  12667.55145245  10009.06500867]
2025-06-24 11:39:37 INFO Expected Optimum FE: -5000
2025-06-24 11:39:37 INFO Unimodal AOCC mean: nan
2025-06-24 11:39:37 INFO Multimodal (single component) AOCC mean: nan
2025-06-24 11:39:37 INFO Multimodal (multiple components) AOCC mean: 0.0000
2025-06-24 11:39:37 INFO AOCC mean: 0.0000
2025-06-24 11:39:37 INFO Weighed AOCC mean: nan
2025-06-24 11:39:39 INFO Run function 19 complete. FEHistory len: 150000, AOCC: 0.1295
2025-06-24 11:39:39 INFO FeHistory: [155936.42111516 213406.87651278 147009.22747911 ...  -4999.97268456
  -4999.95409291  -4999.96700502]
2025-06-24 11:39:39 INFO Expected Optimum FE: -5000
2025-06-24 11:39:39 INFO Good algorithm:
Algorithm Name: EnhancedArchiveGuidedDE
import numpy as np
import random

class EnhancedArchiveGuidedDE: #aocc 0.15
    def __init__(self, budget: int, dim: int, lower_bounds: list[float], upper_bounds: list[float],
                 population_size_factor: float = 8.82865217019506, archive_size: int = 165.22481375900153, initial_F_scale: float = 0.3544373580018585):
        self.budget = int(budget)
        self.dim = int(dim)
        self.lower_bounds = np.array(lower_bounds, dtype=float)
        self.upper_bounds = np.array(upper_bounds, dtype=float)

        self.eval_count = 0
        self.best_solution_overall = None
        self.best_fitness_overall = float('inf')

        self.population_size = int(population_size_factor * self.dim)  # common heuristic
        self.archive_size = archive_size
        self.archive = []
        self.population = None
        self.F_scale = initial_F_scale  # initial scaling factor

    def optimize(self, objective_function: callable, acceptance_threshold: float = 1e-8,
                 F_scale_variation: float = 0.3, archive_update_threshold: float = 0.8) -> tuple:
        self.eval_count = 0
        self.population = np.random.uniform(self.lower_bounds, self.upper_bounds, size=(self.population_size, self.dim))
        fitness = objective_function(self.population)
        self.eval_count += self.population_size

        self.best_solution_overall = self.population[np.argmin(fitness)]
        self.best_fitness_overall = np.min(fitness)

        while self.eval_count < self.budget:
            offspring = self.generate_offspring(self.population, fitness, F_scale_variation)
            offspring_fitness = objective_function(offspring)
            self.eval_count += len(offspring)

            # Update archive
            self.update_archive(offspring, offspring_fitness, archive_update_threshold)

            # Select best solutions for next generation
            combined_population = np.concatenate((self.population, offspring))
            combined_fitness = np.concatenate((fitness, offspring_fitness))
            indices = np.argsort(combined_fitness)
            self.population = combined_population[indices[:self.population_size]]
            fitness = combined_fitness[indices[:self.population_size]]

            # Update best solution
            self.best_solution_overall = self.population[np.argmin(fitness)]
            self.best_fitness_overall = np.min(fitness)

        optimization_info = {
            'function_evaluations_used': self.eval_count,
            'final_best_fitness': self.best_fitness_overall,
            'archive_size': len(self.archive)
        }
        return self.best_solution_overall, self.best_fitness_overall, optimization_info

    def generate_offspring(self, population, fitness, F_scale_variation):
        offspring = np.zeros((self.population_size, self.dim))
        # Adaptive scaling factor
        self.F_scale = 0.5 + F_scale_variation * np.random.rand()  # scale factor with slight variation

        for i in range(self.population_size):
            # Select pbest from archive (if available)
            if self.archive:
                pbest_index = np.random.choice(len(self.archive))
                pbest = self.archive[pbest_index][0]
            else:
                pbest = population[np.argmin(fitness)]

            a, b, c = random.sample(range(self.population_size), 3)
            while a == i or b == i or c == i:
                a, b, c = random.sample(range(self.population_size), 3)

            offspring[i] = population[i] + self.F_scale * (pbest - population[i] + population[a] - population[b])
            offspring[i] = np.clip(offspring[i], self.lower_bounds, self.upper_bounds)  # Boundary handling

        return offspring

    def update_archive(self, offspring, offspring_fitness, archive_update_threshold):
        for i in range(len(offspring)):
            if len(self.archive) < self.archive_size:
                self.archive.append((offspring[i], offspring_fitness[i]))
            else:
                # Prioritize diversity in archive
                worst_index = np.argmax([f for _, f in self.archive])
                if offspring_fitness[i] < self.archive[worst_index][1] or len(self.archive) < self.archive_size * archive_update_threshold:
                    self.archive[worst_index] = (offspring[i], offspring_fitness[i])
2025-06-24 11:39:39 INFO Unimodal AOCC mean: nan
2025-06-24 11:39:39 INFO Multimodal (single component) AOCC mean: nan
2025-06-24 11:39:39 INFO Multimodal (multiple components) AOCC mean: 0.0432
2025-06-24 11:39:39 INFO AOCC mean: 0.0432
2025-06-24 11:39:39 INFO Weighed AOCC mean: nan
2025-06-24 11:39:55 INFO Run function 16 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:39:55 INFO FeHistory: [131345.29363728 178344.91321465 173305.07243977 ...  -4419.9
  -4419.9         -4419.9       ]
2025-06-24 11:39:55 INFO Expected Optimum FE: -5000
2025-06-24 11:39:55 INFO --- GNBG Problem Parameters for f18 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.22159228 0.42314776 0.4901829  0.25862884 0.37043014 0.37440768
 0.26098797 0.491006   0.27569772 0.45404864]
----------------------------------------
2025-06-24 11:42:17 INFO Run function 18 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 11:42:17 INFO FeHistory: [156630.03956796 275266.05979217 254149.73739696 ...  -4399.9
  -4399.9         -4399.9       ]
2025-06-24 11:42:17 INFO Expected Optimum FE: -5000
2025-06-24 11:42:17 INFO --- GNBG Problem Parameters for f19 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -5000.000000
  Lambda (Curvature): [1 1 1 1 1]
  Mu (Asymmetry/Depth): [0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5]
----------------------------------------
2025-06-24 12:02:18 INFO Run function 19 complete. FEHistory len: 150000, AOCC: 0.0000
2025-06-24 12:02:18 INFO FeHistory: [178601.16621525 157601.05916281 165380.35669938 ...  -4399.9
  -4399.9         -4399.9       ]
2025-06-24 12:02:18 INFO Expected Optimum FE: -5000
2025-06-24 12:02:18 INFO Unimodal AOCC mean: nan
2025-06-24 12:02:18 INFO Multimodal (single component) AOCC mean: nan
2025-06-24 12:02:18 INFO Multimodal (multiple components) AOCC mean: 0.0000
2025-06-24 12:02:18 INFO AOCC mean: 0.0000
2025-06-24 12:02:18 INFO Weighed AOCC mean: nan
