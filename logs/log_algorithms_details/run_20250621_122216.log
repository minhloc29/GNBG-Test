2025-06-21 12:22:17 INFO Using LLM api key #AIzaSyCK6miE77n6z7PUf0RNgj8seMiiVET-wqk)
2025-06-21 12:22:17 INFO Using LLM api key #AIzaSyARJfdVOsI9AKUK6gxvUszL_bn5Z_lr5Wg)
2025-06-21 12:22:26 INFO --- GNBG Problem Parameters for f21 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -50.000000
  Lambda (Curvature): [0.5 0.5 0.5 0.5 0.5]
  Mu (Asymmetry/Depth): [0.17318004 0.11194571 0.19092932 0.18126106 0.14008737 0.11467924
 0.12498507 0.12642975 0.11734302 0.18190892]
----------------------------------------
2025-06-21 12:22:27 INFO --- GNBG Problem Parameters for f21 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -50.000000
  Lambda (Curvature): [0.5 0.5 0.5 0.5 0.5]
  Mu (Asymmetry/Depth): [0.17318004 0.11194571 0.19092932 0.18126106 0.14008737 0.11467924
 0.12498507 0.12642975 0.11734302 0.18190892]
----------------------------------------
2025-06-21 12:22:27 ERROR Can not run the algorithm
2025-06-21 12:22:27 INFO Run function 21 complete. FEHistory len: 300, AOCC: 0.0000
2025-06-21 12:22:27 INFO FeHistory: [253.99024796 331.25955007 231.08988479 296.04565894 274.51642844
 242.05796745 292.81228907 296.29318835 263.75031187 288.31329262
 326.72144198 239.82290936 265.40573185 312.97573422 258.21635487
 247.96117526 275.34626244 232.90275917 336.50740456 305.00052174
 273.80621413 291.08480261 311.6295608  261.15424259 260.18307911
 249.91373538 233.39787044 281.62488281 296.78340534 289.73318947
 290.29343696 326.29805647 280.3526365  330.06148188 315.06130961
 263.85634359 278.02976875 278.72721438 274.8125956  298.49692357
 271.90209153 235.02400352 251.11835777 213.35643389 313.76567201
 244.78122361 228.55765185 272.81327712 319.55830521 244.51272207
 242.14209626 281.98095097 315.92585096 241.73847391 335.99939231
 285.4395056  291.49744475 312.27816551 252.0042882  213.69003975
 285.06073469 300.99575491 286.76597105 287.06766956 286.615581
 267.34651937 283.70140471 288.28649358 216.16395365 259.04189328
 325.68195496 314.45044046 327.33555345 280.0933707  228.23878485
 306.39673529 285.57885355 315.62274547 315.86943237 288.27328838
 290.06428374 244.02186619 285.9967708  338.26631325 253.99779389
 261.46421753 338.91568682 264.56758636 272.58133932 244.75616057
 238.49760364 272.91894591 296.78052754 283.59668846 289.46407011
 239.68893357 221.88311806 222.83477727 305.68848645 327.96817346
 596.45457608 589.96945365 753.48563047 615.3297108  655.23614354
 536.65702839 660.55208952 805.49626447 716.08300098 735.05101111
 657.73149991 554.09000987 546.48358468 546.17096889 606.19304585
 591.04614736 717.81754534 642.35072546 759.08401611 667.86802889
 560.48951884 696.49024329 734.22584532 616.44553469 592.33777698
 567.46707143 579.22748969 572.29044369 723.86613278 553.60109525
 549.2213347  566.98343389 621.67526033 594.30271333 771.25671976
 551.6835194  466.76214347 585.94423607 469.83400385 549.17200864
 685.08285045 424.3846199  653.67617146 594.56475268 475.26618726
 494.07777866 580.77287079 575.86405103 554.3135223  502.47651178
 488.60940282 620.58152002 678.72604006 556.1549894  725.72622377
 528.75507387 553.16577443 491.1433184  594.50008629 425.72451511
 683.46263096 613.06202545 541.08565744 609.47852771 659.91241194
 564.64192445 580.92853648 569.31780135 476.20399872 507.50557456
 458.99906694 544.37410048 733.36758641 515.99816105 717.3700425
 679.89514745 466.81021969 690.94294621 538.93693039 422.79524697
 592.7556233  513.00209626 506.01903321 713.40227453 555.3164267
 584.11821825 558.77908628 479.28561594 526.92089671 592.92192923
 603.03264079 582.68313479 460.73436675 531.57689983 648.24698807
 645.1540334  635.87399426 643.62272885 524.20460212 620.3803818
 469.61434277 488.00815515 389.02671879 443.72071816 461.10800474
 552.10169542 677.72414421 588.13678228 541.56898382 502.20253621
 502.63393833 483.61057429 456.99220515 617.88387701 421.44024092
 497.37493126 462.81289752 479.02580142 377.28431872 489.40320491
 480.98303309 504.65148293 494.87920988 538.26120961 578.27003942
 477.29942071 429.22574852 553.84510242 575.37404729 624.00561813
 578.96949702 563.27249847 495.8570263  422.0830937  553.95291179
 542.32645587 476.84914406 583.19678177 341.76465026 537.86732278
 360.67283961 808.88599    444.76671565 608.90049195 418.80800711
 491.62313952 368.88019768 644.57805175 407.40315704 529.76979461
 652.38088176 577.79533019 538.75284863 580.65313552 569.78543886
 414.02224119 356.25475978 522.34940063 490.72640685 432.32521792
 714.09567686 626.49887884 476.00823012 564.13778076 513.46327944
 524.30938621 487.94126659 500.46574302 611.51578282 696.66627951
 612.82294759 487.59421565 539.7202497  361.55575052 658.74761326
 691.97559868 530.70977363 608.39526303 408.85872401 545.9420004
 640.177308   532.56207364 513.63340283 486.91714126 479.32617574
 517.97790949 526.09143534 463.19807856 472.32058191 695.10224776
 586.88877474 573.25807127 595.07379849 590.94330829 422.18236899
 495.98312668 665.48631208 606.97661915 556.16135845 650.82933309]
2025-06-21 12:22:27 INFO Expected Optimum FE: -50
2025-06-21 12:22:27 INFO Unimodal AOCC mean: nan
2025-06-21 12:22:27 INFO Multimodal (single component) AOCC mean: nan
2025-06-21 12:22:27 INFO Multimodal (multiple components) AOCC mean: 0.0000
2025-06-21 12:22:27 INFO AOCC mean: 0.0000
2025-06-21 12:22:27 INFO Using LLM api key #AIzaSyCK6miE77n6z7PUf0RNgj8seMiiVET-wqk)
2025-06-21 12:22:35 INFO --- GNBG Problem Parameters for f21 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -50.000000
  Lambda (Curvature): [0.5 0.5 0.5 0.5 0.5]
  Mu (Asymmetry/Depth): [0.17318004 0.11194571 0.19092932 0.18126106 0.14008737 0.11467924
 0.12498507 0.12642975 0.11734302 0.18190892]
----------------------------------------
2025-06-21 12:22:46 INFO Run function 21 complete. FEHistory len: 70000, AOCC: 0.0000
2025-06-21 12:22:46 INFO FeHistory: [296.51685843 281.25744677 269.72498478 ... 360.14583601 343.63406021
 323.94313741]
2025-06-21 12:22:46 INFO Expected Optimum FE: -50
2025-06-21 12:22:46 INFO Unimodal AOCC mean: nan
2025-06-21 12:22:46 INFO Multimodal (single component) AOCC mean: nan
2025-06-21 12:22:46 INFO Multimodal (multiple components) AOCC mean: 0.0000
2025-06-21 12:22:46 INFO AOCC mean: 0.0000
2025-06-21 12:22:46 INFO Using LLM api key #AIzaSyARJfdVOsI9AKUK6gxvUszL_bn5Z_lr5Wg)
2025-06-21 12:22:54 INFO --- GNBG Problem Parameters for f21 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -50.000000
  Lambda (Curvature): [0.5 0.5 0.5 0.5 0.5]
  Mu (Asymmetry/Depth): [0.17318004 0.11194571 0.19092932 0.18126106 0.14008737 0.11467924
 0.12498507 0.12642975 0.11734302 0.18190892]
----------------------------------------
2025-06-21 12:23:14 INFO Run function 21 complete. FEHistory len: 70000, AOCC: 0.0000
2025-06-21 12:23:14 INFO FeHistory: [243.3755536  270.5233186  299.38663135 ... 168.20602298 213.90929893
 213.89515301]
2025-06-21 12:23:14 INFO Expected Optimum FE: -50
2025-06-21 12:23:14 INFO Unimodal AOCC mean: nan
2025-06-21 12:23:14 INFO Multimodal (single component) AOCC mean: nan
2025-06-21 12:23:14 INFO Multimodal (multiple components) AOCC mean: 0.0000
2025-06-21 12:23:14 INFO AOCC mean: 0.0000
2025-06-21 12:23:14 INFO Using LLM api key #AIzaSyCK6miE77n6z7PUf0RNgj8seMiiVET-wqk)
2025-06-21 12:23:21 INFO --- GNBG Problem Parameters for f21 ---
  Dimension: 30, MaxEvals: 1000000
  Search Bounds: [-100, 100]
  Number of Components: 5
  Known Optimum Value: -50.000000
  Lambda (Curvature): [0.5 0.5 0.5 0.5 0.5]
  Mu (Asymmetry/Depth): [0.17318004 0.11194571 0.19092932 0.18126106 0.14008737 0.11467924
 0.12498507 0.12642975 0.11734302 0.18190892]
----------------------------------------
2025-06-21 12:23:35 INFO [TIMEOUT] Evaluation exceeded 60 seconds and was skipped.
2025-06-21 12:24:13 INFO Run function 21 complete. FEHistory len: 70000, AOCC: 0.0876
2025-06-21 12:24:13 INFO FeHistory: [315.00891113 309.63938158 263.1271638  ... -43.05518843 -42.51202583
 -42.28954288]
2025-06-21 12:24:13 INFO Expected Optimum FE: -50
2025-06-21 12:24:13 INFO Good algorithm:
Algorithm Name: AdaptiveDifferentialEvolutionWithClustering
import numpy as np
from sklearn.cluster import KMeans

class AdaptiveDifferentialEvolutionWithClustering:
    def __init__(self, budget: int, dim: int, lower_bounds: list[float], upper_bounds: list[float]):
        self.budget = int(budget)
        self.dim = int(dim)
        self.lower_bounds = np.array(lower_bounds, dtype=float)
        self.upper_bounds = np.array(upper_bounds, dtype=float)

        self.eval_count = 0
        self.best_solution_overall = None
        self.best_fitness_overall = float('inf')
        
        self.population_size = 10 * self.dim  #Heuristic population sizing
        self.F = 0.8  # Differential weight
        self.CR = 0.9 # Crossover rate
        self.cluster_k = 5 # Number of clusters for diversity analysis


    def optimize(self, objective_function: callable, acceptance_threshold: float = 1e-8) -> tuple:
        self.eval_count = 0
        if self.dim > 0:
            self.population = np.random.uniform(self.lower_bounds, self.upper_bounds, (self.population_size, self.dim))
        else:
            self.population = np.array([])

        fitness_values = objective_function(self.population)
        self.eval_count += self.population_size
        self.best_solution_overall = self.population[np.argmin(fitness_values)]
        self.best_fitness_overall = np.min(fitness_values)

        while self.eval_count < self.budget:
            offspring = []
            for i in range(self.population_size):
                # Mutation
                a, b, c = np.random.choice(np.arange(self.population_size), 3, replace=False)
                while a == i or b == i or c == i:
                    a, b, c = np.random.choice(np.arange(self.population_size), 3, replace=False)
                mutant = self.population[a] + self.F * (self.population[b] - self.population[c])

                #Adaptive Mutation - adjust F based on diversity
                kmeans = KMeans(n_clusters=self.cluster_k, random_state=0).fit(self.population)
                cluster_centers = kmeans.cluster_centers_
                diversity = np.mean(np.linalg.norm(cluster_centers[:, np.newaxis] - cluster_centers, axis=2))
                self.F = max(0.1, min(1.0, self.F + 0.1 * (1 - diversity)))

                # Boundary check
                mutant = np.clip(mutant, self.lower_bounds, self.upper_bounds)

                # Crossover
                trial = np.copy(self.population[i])
                jrand = np.random.randint(0, self.dim)
                for j in range(self.dim):
                    if np.random.rand() < self.CR or j == jrand:
                        trial[j] = mutant[j]

                offspring.append(trial)

            offspring = np.array(offspring)
            offspring_fitness = objective_function(offspring)
            self.eval_count += self.population_size

            #Selection
            combined_population = np.vstack((self.population, offspring))
            combined_fitness = np.concatenate((fitness_values, offspring_fitness))
            sorted_indices = np.argsort(combined_fitness)
            self.population = combined_population[sorted_indices[:self.population_size]]
            fitness_values = combined_fitness[sorted_indices[:self.population_size]]

            # Update best solution
            if np.min(fitness_values) < self.best_fitness_overall:
                self.best_solution_overall = self.population[np.argmin(fitness_values)]
                self.best_fitness_overall = np.min(fitness_values)


        optimization_info = {
            'function_evaluations_used': self.eval_count,
            'final_best_fitness': self.best_fitness_overall
        }
        return self.best_solution_overall, self.best_fitness_overall, optimization_info

2025-06-21 12:24:13 INFO Unimodal AOCC mean: nan
2025-06-21 12:24:13 INFO Multimodal (single component) AOCC mean: nan
2025-06-21 12:24:13 INFO Multimodal (multiple components) AOCC mean: 0.0876
2025-06-21 12:24:13 INFO AOCC mean: 0.0876
2025-06-21 12:24:21 INFO [TIMEOUT] Evaluation exceeded 60 seconds and was skipped.
2025-06-21 12:27:01 INFO Run function 21 complete. FEHistory len: 70000, AOCC: 0.0000
2025-06-21 12:27:01 INFO FeHistory: [283.27863875 327.43586118 293.09645638 ... 179.68474248 130.23207003
 132.70151948]
2025-06-21 12:27:01 INFO Expected Optimum FE: -50
2025-06-21 12:27:01 INFO Unimodal AOCC mean: nan
2025-06-21 12:27:01 INFO Multimodal (single component) AOCC mean: nan
2025-06-21 12:27:01 INFO Multimodal (multiple components) AOCC mean: 0.0000
2025-06-21 12:27:01 INFO AOCC mean: 0.0000
